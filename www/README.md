# ACME Fleet Dashboard

AdminLTE4-based web dashboard for the OCPI 2.2 compliant API demo.

## Overview

This dashboard provides a visual interface for the ACME Fleet charging infrastructure, displaying:
- **Dashboard**: Overview with statistics and recent activity
- **Charging Locations**: All 5 ACME charging locations across the Netherlands
- **Charge Detail Records (CDRs)**: Complete charge session history with OCPI-compliant filtering

## Features

### 1. Dashboard (index.html)
- **Real-time Statistics**:
  - Total charging locations
  - Total charge sessions
  - Total energy delivered (kWh)
  - Total revenue (€)
- **Recent Charge Sessions**: Last 10 CDRs with duration and cost
- **Location Overview**: Quick view of all charging locations

### 2. Locations Page (locations.html)
- **Interactive Table**: Sortable, searchable DataTable with all location details
- **Location Cards**: Visual cards showing:
  - Location name and address
  - GPS coordinates with Google Maps links
  - Last updated timestamp
- **DataTables Integration**: Advanced sorting and filtering

### 3. CDRs Page (cdrs.html)
- **OCPI REST Standard Filters**:
  - `date_from`: Filter by start date
  - `date_to`: Filter by end date
  - `offset`: Pagination offset
  - `limit`: Results per page (1-100)
- **Pagination Support**:
  - Previous/Next buttons
  - Shows current range (e.g., "1-25 of 150")
  - Respects HTTP Link headers from API
- **Statistics**: Real-time calculation of:
  - Total sessions
  - Total energy
  - Total revenue
  - Average energy per session
- **Detailed Table**: Shows session ID, start/end times, duration, energy, cost

## Technology Stack

All assets loaded from CDN (no local git repository needed):

- **AdminLTE 3.2**: Dashboard framework
- **Bootstrap 4.6.2**: UI components
- **jQuery 3.7.0**: DOM manipulation and AJAX
- **DataTables 1.13.6**: Advanced table features
- **Font Awesome 6.4.0**: Icons

## API Integration

The dashboard connects to the OCPI API at `http://localhost:5055/ocpi/2.2`:

### Endpoints Used
- `GET /ocpi/2.2/locations`: Fetch charging locations
- `GET /ocpi/2.2/cdrs`: Fetch charge detail records with pagination

### OCPI Compliance
- Supports `date_from`, `date_to`, `offset`, `limit` query parameters
- Parses `Link` header for pagination (rel="next")
- Displays `X-Total-Count` and `X-Limit` headers
- ISO 8601 datetime formatting

## Usage

1. **Start the API Server**:
   ```powershell
   cd c:\source\ocpi\ocpi-dotnet\Ocpi.Api
   dotnet run
   ```
   Server will run at `http://localhost:5055`

2. **Open Dashboard**:
   - Open `c:\source\ocpi\www\index.html` in a web browser
   - Or serve with a local web server:
     ```powershell
     cd c:\source\ocpi\www
     python -m http.server 8000
     ```
     Then navigate to `http://localhost:8000`

3. **Navigate**:
   - Use the sidebar to switch between Dashboard, Locations, and CDRs
   - Click on stat boxes to navigate to detailed views
   - Use filters on CDRs page to test OCPI pagination

## File Structure

```
c:\source\ocpi\www\
├── index.html        # Dashboard homepage
├── locations.html    # Charging locations view
├── cdrs.html        # Charge detail records with filtering
└── README.md        # This file
```

## Demo Scenarios

### Scenario 1: View All Locations
1. Navigate to "Charging Locations"
2. See all 5 ACME locations (Amsterdam, Rotterdam, Utrecht, The Hague, Eindhoven)
3. Click coordinates to view on Google Maps

### Scenario 2: Filter CDRs by Date
1. Navigate to "Charge Records (CDRs)"
2. Set `Date From` to start of simulation period
3. Set `Date To` to end of simulation period
4. Click "Apply" to filter
5. See filtered results with pagination info

### Scenario 3: Test Pagination
1. On CDRs page, set `Limit` to 10
2. Click "Apply"
3. Click "Next" to see next page of results
4. Notice offset increments by 10
5. Click "Previous" to go back

### Scenario 4: View Statistics
1. Dashboard shows real-time aggregations
2. Statistics update based on current data
3. Click stat boxes to drill down into details

## Browser Compatibility

Tested with:
- Chrome 120+
- Firefox 120+
- Edge 120+
- Safari 17+

## Notes

- **No Git Repository Cloned**: Uses CDN-hosted AdminLTE assets per best practices
- **CORS**: API must enable CORS for dashboard to work (already configured)
- **Synthetic Data**: All data generated by SimSharp simulation
- **Responsive**: Works on desktop, tablet, and mobile devices
